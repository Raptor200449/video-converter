<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>FluxConvert ‚Äì Convertisseur & Compresseur de fichiers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --bg: #020617;
            --bg-card: #020617;
            --bg-elevated: #020617;
            --border-subtle: #1f2937;
            --accent: #6366f1;
            --accent-soft: rgba(99, 102, 241, 0.15);
            --accent-strong: #4f46e5;
            --text: #e5e7eb;
            --text-soft: #9ca3af;
            --danger: #ef4444;
        }

        /* Th√®me clair */
        body[data-theme="light"] {
            --bg: #f3f4f6;
            --bg-card: #ffffff;
            --bg-elevated: #f9fafb;
            --border-subtle: #e5e7eb;
            --accent: #4f46e5;
            --accent-soft: rgba(79, 70, 229, 0.08);
            --accent-strong: #4f46e5;
            --text: #111827;
            --text-soft: #6b7280;
            --danger: #b91c1c;
        }

        body {
            margin: 0;
            min-height: 100vh;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: radial-gradient(circle at top, #111827 0, #020617 40%, #000 100%);
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }

        body[data-theme="light"] {
            background: radial-gradient(circle at top, #e5e7eb 0, #f3f4f6 40%, #e5e7eb 100%);
        }

        * {
            box-sizing: border-box;
        }

        .shell {
            max-width: 960px;
            width: 100%;
            padding: 20px;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            margin-bottom: 18px;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo {
            width: 34px;
            height: 34px;
            border-radius: 12px;
            background: radial-gradient(circle at 30% 30%, #f97316, #ef4444, #6366f1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 18px;
            color: white;
        }

        body[data-theme="light"] .logo {
            background: radial-gradient(circle at 30% 30%, #f97316, #ef4444, #4f46e5);
        }

        .title-block h1 {
            font-size: 1.3rem;
            margin: 0;
        }

        .title-block p {
            margin: 2px 0 0;
            font-size: 0.85rem;
            color: var(--text-soft);
        }

        .header-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 6px;
        }

        .badge {
            font-size: 0.75rem;
            border-radius: 999px;
            padding: 4px 10px;
            border: 1px solid rgba(148, 163, 184, 0.5);
            color: var(--text-soft);
            white-space: nowrap;
        }

        .top-controls {
            display: flex;
            gap: 8px;
        }

        .pill-button {
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,0.6);
            background: rgba(15,23,42,0.9);
            color: #e5e7eb;
            font-size: 0.75rem;
            padding: 4px 10px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
        }

        body[data-theme="light"] .pill-button {
            background: #f9fafb;
            color: #111827;
        }

        .pill-button span.icon {
            font-size: 0.95rem;
        }

        .lang-select {
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,0.6);
            background: rgba(15,23,42,0.9);
            color: #e5e7eb;
            font-size: 0.75rem;
            padding: 4px 8px;
            cursor: pointer;
        }

        body[data-theme="light"] .lang-select {
            background: #f9fafb;
            color: #111827;
        }

        .grid {
            display: grid;
            grid-template-columns: minmax(0, 1.6fr) minmax(0, 1fr);
            gap: 18px;
        }

        @media (max-width: 800px) {
            .grid {
                grid-template-columns: minmax(0, 1fr);
            }
        }

        .card {
            background: rgba(15, 23, 42, 0.88);
            border-radius: 18px;
            border: 1px solid var(--border-subtle);
            box-shadow:
                0 22px 45px rgba(0,0,0,0.8),
                0 0 0 1px rgba(148,163,184,0.12);
            padding: 18px 18px 16px;
        }

        body[data-theme="light"] .card {
            background: var(--bg-card);
            box-shadow:
                0 16px 40px rgba(15, 23, 42, 0.10),
                0 0 0 1px rgba(148,163,184,0.18);
        }

        .card h2 {
            font-size: 1rem;
            margin: 0 0 4px;
        }

        .card-subtitle {
            font-size: 0.8rem;
            color: var(--text-soft);
            margin-bottom: 12px;
        }

        .steps {
            display: flex;
            gap: 10px;
            margin-bottom: 14px;
            flex-wrap: wrap;
        }

        .step {
            flex: 1;
            min-width: 110px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.75rem;
            padding: 6px 8px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(55, 65, 81, 0.9);
        }

        body[data-theme="light"] .step {
            background: #f9fafb;
            border-color: #e5e7eb;
        }

        .step span.icon {
            width: 18px;
            height: 18px;
            border-radius: 999px;
            background: var(--accent-soft);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            color: #c7d2fe;
        }

        .step strong {
            color: var(--text);
        }

        .step small {
            display: block;
            color: var(--text-soft);
        }

        .dropzone {
            border-radius: 16px;
            padding: 18px 16px;
            border: 1.5px dashed rgba(148, 163, 184, 0.6);
            background: radial-gradient(circle at top left, rgba(56,189,248,0.08), transparent 55%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.2s, background 0.2s, transform 0.08s;
        }

        body[data-theme="light"] .dropzone {
            background: radial-gradient(circle at top left, rgba(56,189,248,0.06), #f9fafb);
        }

        .dropzone.dragover {
            border-color: var(--accent);
            background: radial-gradient(circle at top, rgba(129,140,248,0.22), transparent 60%);
            transform: translateY(-1px);
        }

        .dz-icon {
            width: 38px;
            height: 38px;
            border-radius: 14px;
            background: rgba(15,23,42,0.94);
            border: 1px solid rgba(55,65,81,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        body[data-theme="light"] .dz-icon {
            background: #f9fafb;
            border-color: #e5e7eb;
        }

        .dz-main {
            font-size: 0.9rem;
        }

        .dz-main strong {
            color: var(--text);
        }

        .dz-main span {
            color: var(--accent);
        }

        .dz-sub {
            font-size: 0.75rem;
            color: var(--text-soft);
        }

        .dz-filename {
            font-size: 0.8rem;
            color: #cbd5f5;
            background: rgba(15,23,42,0.96);
            border-radius: 999px;
            padding: 4px 10px;
            border: 1px solid rgba(55,65,81,0.9);
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        body[data-theme="light"] .dz-filename {
            background: #f9fafb;
            border-color: #e5e7eb;
            color: #111827;
        }

        input[type="file"] {
            display: none;
        }

        .form-row {
            display: flex;
            gap: 10px;
            margin-top: 14px;
            flex-wrap: wrap;
        }

        .field {
            flex: 1;
            min-width: 140px;
        }

        .field label {
            font-size: 0.8rem;
            color: var(--text-soft);
            display: block;
            margin-bottom: 4px;
        }

        select {
            width: 100%;
            border-radius: 999px;
            border: 1px solid rgba(55,65,81,0.9);
            background: #020617;
            color: var(--text);
            padding: 7px 11px;
            font-size: 0.85rem;
            outline: none;
        }

        body[data-theme="light"] select {
            background: #f9fafb;
            border-color: #e5e7eb;
        }

        select:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 1px rgba(129,140,248,0.4);
        }

        .actions {
            display: flex;
            flex-direction: column;
            margin-top: 14px;
            gap: 6px;
        }

        button.main-btn {
            border-radius: 999px;
            border: none;
            padding: 9px 14px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            background: linear-gradient(135deg, #6366f1, #ec4899);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: transform 0.08s, box-shadow 0.12s, opacity 0.12s;
            box-shadow: 0 10px 25px rgba(129,140,248,0.4);
        }

        button.main-btn:hover:not(:disabled) {
            transform: translateY(-0.5px);
            box-shadow: 0 16px 35px rgba(129,140,248,0.5);
            opacity: 0.96;
        }

        button.main-btn:disabled {
            opacity: 0.6;
            cursor: default;
            box-shadow: none;
        }

        .btn-label-main {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-label-main span.icon {
            font-size: 1rem;
        }

        .btn-sub {
            font-size: 0.72rem;
            color: #e5e7eb;
        }

        .status {
            font-size: 0.78rem;
            color: var(--text-soft);
            display: flex;
            align-items: center;
            gap: 8px;
            min-height: 18px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: #22c55e;
        }

        .status-dot.busy {
            background: #facc15;
            animation: pulse 1s infinite ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.25); opacity: 0.4; }
            100% { transform: scale(1); opacity: 0.9; }
        }

        .hint {
            font-size: 0.72rem;
            color: var(--text-soft);
            margin-top: 4px;
        }

        .side {
            display: flex;
            flex-direction: column;
            gap: 10px;
            font-size: 0.78rem;
        }

        .side-card {
            border-radius: 16px;
            border: 1px solid rgba(31,41,55,0.95);
            background: linear-gradient(145deg, rgba(15,23,42,0.96), rgba(15,23,42,0.92));
            padding: 12px 14px;
        }

        body[data-theme="light"] .side-card {
            background: linear-gradient(145deg, #ffffff, #f9fafb);
        }

        .side-title {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .pill-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 6px;
        }

        .pill {
            border-radius: 999px;
            border: 1px solid rgba(55,65,81,0.9);
            padding: 3px 8px;
            font-size: 0.7rem;
            color: #cbd5f5;
            background: rgba(15,23,42,0.95);
        }

        body[data-theme="light"] .pill {
            background: #f9fafb;
            border-color: #e5e7eb;
            color: #111827;
        }

        .muted {
            color: var(--text-soft);
        }

        .muted-strong {
            color: var(--text);
            font-weight: 500;
        }

        .limit {
            margin-top: 4px;
            font-size: 0.72rem;
            color: #fbbf24;
        }

        .legal {
            margin-top: 4px;
            font-size: 0.7rem;
            color: #6b7280;
        }

        /* Footer */
        .footer {
            margin-top: 16px;
            font-size: 0.72rem;
            color: var(--text-soft);
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 8px;
            border-top: 1px solid rgba(31,41,55,0.9);
            padding-top: 8px;
        }

        body[data-theme="light"] .footer {
            border-top-color: #e5e7eb;
        }

        .footer-left span {
            font-weight: 500;
            color: var(--text);
        }

        .footer-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .footer-link {
            cursor: default;
            text-decoration: none;
            color: var(--text-soft);
        }

        .footer-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body data-theme="dark">
<div class="shell">
    <header class="header">
        <div class="brand">
            <div class="logo">FC</div>
            <div class="title-block">
                <h1 data-i18n="header.title">FluxConvert ‚Äì Convertisseur & compresseur en ligne</h1>
                <p data-i18n="header.subtitle">Convertis et all√®ge tes vid√©os en quelques clics, sans inscription.</p>
            </div>
        </div>
        <div class="header-right">
            <div class="badge" data-i18n="header.badge">
                ‚ö° 100% gratuit ‚Ä¢ tourne c√¥t√© serveur
            </div>
            <div class="top-controls">
                <button type="button" class="pill-button" id="theme-toggle">
                    <span class="icon" id="theme-toggle-icon">üåô</span>
                    <span id="theme-toggle-label" data-i18n="header.themeDark">Mode sombre</span>
                </button>
                <select id="lang-select" class="lang-select">
                    <option value="auto" data-i18n="lang.auto">Auto</option>
                    <option value="fr">FR</option>
                    <option value="en">EN</option>
                </select>
            </div>
        </div>
    </header>

    <main class="grid">
        <section class="card">
            <h2 data-i18n="main.title">Fichier √† transformer</h2>
            <div class="card-subtitle" data-i18n="main.subtitle">
                3 √©tapes : choisis ton fichier ‚Üí s√©lectionne le format et la qualit√© ‚Üí r√©cup√®re le fichier final.
            </div>

            <div class="steps">
                <div class="step">
                    <span class="icon">1</span>
                    <div>
                        <strong data-i18n="steps.1.title">Choisis ton fichier</strong>
                        <small data-i18n="steps.1.text">Vid√©o ou audio, jusqu‚Äô√† quelques centaines de Mo.</small>
                    </div>
                </div>
                <div class="step">
                    <span class="icon">2</span>
                    <div>
                        <strong data-i18n="steps.2.title">Format & qualit√©</strong>
                        <small data-i18n="steps.2.text">MP4, MP3, MOV‚Ä¶ compression l√©g√®re ou forte.</small>
                    </div>
                </div>
                <div class="step">
                    <span class="icon">3</span>
                    <div>
                        <strong data-i18n="steps.3.title">T√©l√©charge</strong>
                        <small data-i18n="steps.3.text">Le fichier transform√© est pr√™t en un clic.</small>
                    </div>
                </div>
            </div>

            <form id="convert-form" action="/convert" method="post" enctype="multipart/form-data">
                <label for="file" class="dropzone" id="dropzone">
                    <div class="dz-icon">‚¨Ü</div>
                    <div class="dz-main">
                        <strong data-i18n="drop.title">D√©pose ton fichier ici</strong><br>
                        <span data-i18n="drop.subtitle">ou clique pour le s√©lectionner</span>
                    </div>
                    <div class="dz-sub" data-i18n="drop.help">
                        Formats vid√©o/audio classiques (MP4, MOV, MKV, MP3, WAV‚Ä¶)
                    </div>
                    <div class="dz-filename" id="dz-filename" style="display:none;"></div>
                    <input type="file" id="file" name="file" required>
                </label>

                <div class="form-row">
                    <div class="field">
                        <label for="target_format" data-i18n="form.formatLabel">Format de sortie</label>
                        <select id="target_format" name="target_format">
                            <option value="mp4" data-i18n="form.format.mp4">MP4 (vid√©o universelle)</option>
                            <option value="mp3" data-i18n="form.format.mp3">MP3 (audio compress√©)</option>
                            <option value="wav" data-i18n="form.format.wav">WAV (audio brut)</option>
                            <option value="mkv" data-i18n="form.format.mkv">MKV (conteneur vid√©o)</option>
                            <option value="mov" data-i18n="form.format.mov">MOV (vid√©o Apple)</option>
                        </select>
                    </div>

                    <div class="field">
                        <label for="quality" data-i18n="form.qualityLabel">Qualit√© / compression</label>
                        <select id="quality" name="quality">
                            <option value="standard" data-i18n="form.quality.standard">Standard (qualit√© normale)</option>
                            <option value="light" data-i18n="form.quality.light">L√©g√®re compression (poids r√©duit)</option>
                            <option value="strong" data-i18n="form.quality.strong">Forte compression (poids minimal)</option>
                        </select>
                    </div>
                </div>

                <div class="actions">
                    <button type="submit" id="convert-btn" class="main-btn">
                        <div class="btn-label-main">
                            <span class="icon">‚öôÔ∏è</span>
                            <span data-i18n="button.convert">Convertir le fichier</span>
                        </div>
                        <div class="btn-sub" id="btn-subtext" data-i18n="button.sub">
                            La conversion s‚Äôex√©cute c√¥t√© serveur, garde l‚Äôonglet ouvert.
                        </div>
                    </button>
                    <div class="status" id="status">
                        <div class="status-dot" id="status-dot"></div>
                        <span id="status-text" data-i18n="status.ready">Pr√™t √† convertir.</span>
                    </div>
                    <div class="hint" data-i18n="hint.text">
                        Astuce : commence par une petite vid√©o pour voir la taille finale avec chaque niveau de compression.
                    </div>
                </div>
            </form>
        </section>

        <aside class="side">
            <div class="side-card">
                <div class="side-title" data-i18n="side.profile.title">Profil de sortie conseill√©</div>
                <div class="muted">
                    <span class="muted-strong" data-i18n="side.profile.subtitle">Pour TikTok / Reels / Shorts :</span>
                    <ul style="margin: 6px 0 4px 16px; padding:0;">
                        <li data-i18n="side.profile.li1">Format : <strong>MP4</strong></li>
                        <li data-i18n="side.profile.li2">Qualit√© : <strong>‚ÄúL√©g√®re compression‚Äù</strong></li>
                        <li data-i18n="side.profile.li3">R√©sultat : fichier l√©ger, compatible partout.</li>
                    </ul>
                </div>
                <div class="pill-row">
                    <div class="pill" data-i18n="side.profile.pill1">üîÅ Conversion serveur</div>
                    <div class="pill" data-i18n="side.profile.pill2">üé¨ MP4, MOV, MKV</div>
                    <div class="pill" data-i18n="side.profile.pill3">üéß MP3, WAV</div>
                </div>
                <div class="limit" data-i18n="side.profile.limit">
                    √âvite d‚Äôenvoyer des fichiers d‚Äô1 Go : commence plut√¥t par quelques centaines de Mo max.
                </div>
            </div>

            <div class="side-card">
                <div class="side-title" data-i18n="side.info.title">Bon √† savoir</div>
                <div class="muted" data-i18n="side.info.text">
                    - Plus la compression est forte, plus la qualit√© baisse l√©g√®rement.<br>
                    - Sur les vid√©os tr√®s longues, la conversion peut prendre du temps.<br>
                    - Tu peux toujours relancer avec un autre niveau de compression.
                </div>
                <div class="legal" data-i18n="side.info.legal">
                    N‚Äôenvoie que des fichiers dont tu poss√®des les droits ou l‚Äôautorisation de traitement.
                </div>
            </div>

            <div class="side-card">
                <div class="side-title" data-i18n="side.about.title">√Ä propos de FluxConvert</div>
                <div class="muted" data-i18n="side.about.text">
                    FluxConvert est un outil simple pens√© pour les cr√©ateurs et utilisateurs qui veulent convertir et all√©ger leurs fichiers sans prise de t√™te. Aucune inscription, juste un fichier √† l‚Äôentr√©e et un fichier pr√™t √† l‚Äôemploi √† la sortie.
                </div>
                <div class="muted" style="margin-top:6px;" data-i18n="side.about.faqIntro">
                    FAQ rapide :
                </div>
                <ul style="margin:4px 0 0 16px; padding:0; list-style:disc;">
                    <li data-i18n="side.about.q1">Est-ce que c‚Äôest payant ? ‚Äì Non, la version actuelle est 100% gratuite.</li>
                    <li data-i18n="side.about.q2">Mes fichiers sont-ils stock√©s ? ‚Äì Ils sont trait√©s c√¥t√© serveur puis supprim√©s apr√®s conversion.</li>
                </ul>
            </div>
        </aside>
    </main>

    <footer class="footer">
        <div class="footer-left">
            <span>FluxConvert</span> ¬∑ <span data-i18n="footer.version">v0.1 beta ‚Äì en cours d‚Äôam√©lioration</span>
        </div>
        <div class="footer-links">
            <span class="footer-link" data-i18n="footer.link.about">√Ä propos</span>
            <span class="footer-link" data-i18n="footer.link.faq">FAQ</span>
            <span class="footer-link" data-i18n="footer.link.contact">Contact (bient√¥t)</span>
        </div>
    </footer>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const fileInput = document.getElementById('file');
        const dropzone = document.getElementById('dropzone');
        const filenameEl = document.getElementById('dz-filename');
        const form = document.getElementById('convert-form');
        const btn = document.getElementById('convert-btn');
        const statusText = document.getElementById('status-text');
        const statusDot = document.getElementById('status-dot');
        const btnSub = document.getElementById('btn-subtext');
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeToggleIcon = document.getElementById('theme-toggle-icon');
        const themeToggleLabel = document.getElementById('theme-toggle-label');
        const rootBody = document.body;
        const langSelect = document.getElementById('lang-select');

        const translations = {
            fr: {
                "header.title": "FluxConvert ‚Äì Convertisseur & compresseur en ligne",
                "header.subtitle": "Convertis et all√®ge tes vid√©os en quelques clics, sans inscription.",
                "header.badge": "‚ö° 100% gratuit ‚Ä¢ tourne c√¥t√© serveur",
                "header.themeDark": "Mode sombre",
                "header.themeLight": "Mode clair",
                "lang.auto": "Auto",
                "main.title": "Fichier √† transformer",
                "main.subtitle": "3 √©tapes : choisis ton fichier ‚Üí s√©lectionne le format et la qualit√© ‚Üí r√©cup√®re le fichier final.",
                "steps.1.title": "Choisis ton fichier",
                "steps.1.text": "Vid√©o ou audio, jusqu‚Äô√† quelques centaines de Mo.",
                "steps.2.title": "Format & qualit√©",
                "steps.2.text": "MP4, MP3, MOV‚Ä¶ compression l√©g√®re ou forte.",
                "steps.3.title": "T√©l√©charge",
                "steps.3.text": "Le fichier transform√© est pr√™t en un clic.",
                "drop.title": "D√©pose ton fichier ici",
                "drop.subtitle": "ou clique pour le s√©lectionner",
                "drop.help": "Formats vid√©o/audio classiques (MP4, MOV, MKV, MP3, WAV‚Ä¶)",
                "form.formatLabel": "Format de sortie",
                "form.format.mp4": "MP4 (vid√©o universelle)",
                "form.format.mp3": "MP3 (audio compress√©)",
                "form.format.wav": "WAV (audio brut)",
                "form.format.mkv": "MKV (conteneur vid√©o)",
                "form.format.mov": "MOV (vid√©o Apple)",
                "form.qualityLabel": "Qualit√© / compression",
                "form.quality.standard": "Standard (qualit√© normale)",
                "form.quality.light": "L√©g√®re compression (poids r√©duit)",
                "form.quality.strong": "Forte compression (poids minimal)",
                "button.convert": "Convertir le fichier",
                "button.sub": "La conversion s‚Äôex√©cute c√¥t√© serveur, garde l‚Äôonglet ouvert.",
                "status.ready": "Pr√™t √† convertir.",
                "status.running": "Conversion en cours‚Ä¶ ne ferme pas cette page.",
                "hint.text": "Astuce : commence par une petite vid√©o pour voir la taille finale avec chaque niveau de compression.",
                "side.profile.title": "Profil de sortie conseill√©",
                "side.profile.subtitle": "Pour TikTok / Reels / Shorts :",
                "side.profile.li1": "Format : <strong>MP4</strong>",
                "side.profile.li2": "Qualit√© : <strong>‚ÄúL√©g√®re compression‚Äù</strong>",
                "side.profile.li3": "R√©sultat : fichier l√©ger, compatible partout.",
                "side.profile.pill1": "üîÅ Conversion serveur",
                "side.profile.pill2": "üé¨ MP4, MOV, MKV",
                "side.profile.pill3": "üéß MP3, WAV",
                "side.profile.limit": "√âvite d‚Äôenvoyer des fichiers d‚Äô1 Go : commence plut√¥t par quelques centaines de Mo max.",
                "side.info.title": "Bon √† savoir",
                "side.info.text": "- Plus la compression est forte, plus la qualit√© baisse l√©g√®rement.<br>- Sur les vid√©os tr√®s longues, la conversion peut prendre du temps.<br>- Tu peux toujours relancer avec un autre niveau de compression.",
                "side.info.legal": "N‚Äôenvoie que des fichiers dont tu poss√®des les droits ou l‚Äôautorisation de traitement.",
                "side.about.title": "√Ä propos de FluxConvert",
                "side.about.text": "FluxConvert est un outil simple pens√© pour les cr√©ateurs et utilisateurs qui veulent convertir et all√©ger leurs fichiers sans prise de t√™te. Aucune inscription, juste un fichier √† l‚Äôentr√©e et un fichier pr√™t √† l‚Äôemploi √† la sortie.",
                "side.about.faqIntro": "FAQ rapide :",
                "side.about.q1": "Est-ce que c‚Äôest payant ? ‚Äì Non, la version actuelle est 100% gratuite.",
                "side.about.q2": "Mes fichiers sont-ils stock√©s ? ‚Äì Ils sont trait√©s c√¥t√© serveur puis supprim√©s apr√®s conversion.",
                "footer.version": "v0.1 beta ‚Äì en cours d‚Äôam√©lioration",
                "footer.link.about": "√Ä propos",
                "footer.link.faq": "FAQ",
                "footer.link.contact": "Contact (bient√¥t)"
            },
            en: {
                "header.title": "FluxConvert ‚Äì Online Converter & Compressor",
                "header.subtitle": "Convert and shrink your videos in a few clicks, no signup required.",
                "header.badge": "‚ö° 100% free ‚Ä¢ runs on the server",
                "header.themeDark": "Dark mode",
                "header.themeLight": "Light mode",
                "lang.auto": "Auto",
                "main.title": "File to process",
                "main.subtitle": "3 steps: pick your file ‚Üí choose format and quality ‚Üí download the final file.",
                "steps.1.title": "Pick your file",
                "steps.1.text": "Video or audio, up to a few hundred MB.",
                "steps.2.title": "Format & quality",
                "steps.2.text": "MP4, MP3, MOV‚Ä¶ light or strong compression.",
                "steps.3.title": "Download",
                "steps.3.text": "Your converted file is ready in one click.",
                "drop.title": "Drop your file here",
                "drop.subtitle": "or click to browse",
                "drop.help": "Common video/audio formats (MP4, MOV, MKV, MP3, WAV‚Ä¶)",
                "form.formatLabel": "Output format",
                "form.format.mp4": "MP4 (universal video)",
                "form.format.mp3": "MP3 (compressed audio)",
                "form.format.wav": "WAV (raw audio)",
                "form.format.mkv": "MKV (video container)",
                "form.format.mov": "MOV (Apple video)",
                "form.qualityLabel": "Quality / compression",
                "form.quality.standard": "Standard (normal quality)",
                "form.quality.light": "Light compression (smaller size)",
                "form.quality.strong": "Strong compression (minimal size)",
                "button.convert": "Convert file",
                "button.sub": "Conversion runs on the server, keep this tab open.",
                "status.ready": "Ready to convert.",
                "status.running": "Converting‚Ä¶ don‚Äôt close this page.",
                "hint.text": "Tip: start with a small video to see the final size with each compression level.",
                "side.profile.title": "Recommended output profile",
                "side.profile.subtitle": "For TikTok / Reels / Shorts:",
                "side.profile.li1": "Format: <strong>MP4</strong>",
                "side.profile.li2": "Quality: <strong>‚ÄúLight compression‚Äù</strong>",
                "side.profile.li3": "Result: small file, compatible everywhere.",
                "side.profile.pill1": "üîÅ Server-side conversion",
                "side.profile.pill2": "üé¨ MP4, MOV, MKV",
                "side.profile.pill3": "üéß MP3, WAV",
                "side.profile.limit": "Avoid uploading 1 GB files: start with a few hundred MB max.",
                "side.info.title": "Good to know",
                "side.info.text": "- The stronger the compression, the more quality you lose slightly.<br>- Very long videos can take some time to process.<br>- You can always rerun with a different compression level.",
                "side.info.legal": "Only upload files you own or are allowed to process.",
                "side.about.title": "About FluxConvert",
                "side.about.text": "FluxConvert is a simple tool built for creators and everyday users who want to convert and shrink their files without hassle. No signup, just a file in and a ready-to-use file out.",
                "side.about.faqIntro": "Quick FAQ:",
                "side.about.q1": "Is it paid? ‚Äì No, the current version is 100% free.",
                "side.about.q2": "Are my files stored? ‚Äì They are processed server-side then removed after conversion.",
                "footer.version": "v0.1 beta ‚Äì actively improving",
                "footer.link.about": "About",
                "footer.link.faq": "FAQ",
                "footer.link.contact": "Contact (soon)"
            }
        };

        function updateFilename() {
            const file = fileInput.files[0];
            if (file) {
                filenameEl.style.display = 'inline-block';
                filenameEl.textContent =
                    file.name + ' ‚Ä¢ ' +
                    Math.round(file.size / 1024 / 1024 * 10) / 10 + ' Mo';
            } else {
                filenameEl.style.display = 'none';
                filenameEl.textContent = '';
            }
        }

        dropzone.addEventListener('click', () => fileInput.click());

        dropzone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropzone.classList.add('dragover');
        });

        dropzone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dropzone.classList.remove('dragover');
        });

        dropzone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropzone.classList.remove('dragover');
            if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
                fileInput.files = e.dataTransfer.files;
                updateFilename();
            }
        });

        fileInput.addEventListener('change', updateFilename);

        form.addEventListener('submit', () => {
            if (!fileInput.files[0]) {
                return;
            }
            btn.disabled = true;
            statusDot.classList.add('busy');
            const lang = getCurrentLang();
            const dict = translations[lang] || translations.en;
            statusText.textContent = dict["status.running"];
            btnSub.textContent =
                lang === 'fr'
                    ? "La conversion peut prendre un peu de temps selon la taille du fichier."
                    : "Conversion time depends on the size of your file.";
        });

        // Th√®me (dark / light)
        function applyTheme(theme) {
            rootBody.setAttribute('data-theme', theme);
            const lang = getCurrentLang();
            const t = translations[lang];
            if (theme === 'dark') {
                themeToggleIcon.textContent = 'üåô';
                themeToggleLabel.textContent = t["header.themeDark"];
            } else {
                themeToggleIcon.textContent = '‚òÄÔ∏è';
                themeToggleLabel.textContent = t["header.themeLight"];
            }
            localStorage.setItem('vc-theme', theme);
        }

        function initTheme() {
            const stored = localStorage.getItem('vc-theme');
            if (stored === 'light' || stored === 'dark') {
                applyTheme(stored);
            } else {
                const prefersLight = window.matchMedia &&
                    window.matchMedia('(prefers-color-scheme: light)').matches;
                applyTheme(prefersLight ? 'light' : 'dark');
            }
        }

        themeToggleBtn.addEventListener('click', () => {
            const current = rootBody.getAttribute('data-theme') || 'dark';
            const next = current === 'dark' ? 'light' : 'dark';
            applyTheme(next);
        });

        // Langue
        function detectBrowserLang() {
            const navLang = (navigator.language || navigator.userLanguage || 'en').toLowerCase();
            if (navLang.startsWith('fr')) return 'fr';
            // tout le reste ‚Üí anglais
            return 'en';
        }

        function getCurrentLang() {
            const stored = localStorage.getItem('vc-lang');
            if (stored === 'fr' || stored === 'en') return stored;
            const selection = langSelect.value;
            if (selection === 'fr' || selection === 'en') return selection;
            return detectBrowserLang();
        }

        function applyTranslations(lang) {
            const dict = translations[lang] || translations.en;
            document.querySelectorAll('[data-i18n]').forEach((el) => {
                const key = el.getAttribute('data-i18n');
                if (dict[key]) {
                    if (dict[key].includes('<br') || dict[key].includes('<strong')) {
                        el.innerHTML = dict[key];
                    } else {
                        el.textContent = dict[key];
                    }
                }
            });

            // label th√®me
            const theme = rootBody.getAttribute('data-theme') || 'dark';
            if (theme === 'dark') {
                themeToggleLabel.textContent = dict["header.themeDark"];
            } else {
                themeToggleLabel.textContent = dict["header.themeLight"];
            }

            // option "Auto"
            langSelect.querySelector('option[value="auto"]').textContent = dict["lang.auto"];

            // status & bouton sub
            statusText.textContent = dict["status.ready"];
            btnSub.textContent = dict["button.sub"];
        }

        function initLang() {
            const stored = localStorage.getItem('vc-lang');
            if (stored === 'fr' || stored === 'en') {
                langSelect.value = stored;
                applyTranslations(stored);
            } else {
                langSelect.value = 'auto';
                const detected = detectBrowserLang();
                applyTranslations(detected);
            }
        }

        langSelect.addEventListener('change', () => {
            const value = langSelect.value;
            if (value === 'fr' || value === 'en') {
                localStorage.setItem('vc-lang', value);
                applyTranslations(value);
            } else {
                localStorage.removeItem('vc-lang');
                const detected = detectBrowserLang();
                applyTranslations(detected);
            }
        });

        // Init
        initLang();
        initTheme();
    });
</script>
</body>
</html>
